
<% @foos = @root.children %>

<ul id="folder_entries">
  <% for folder_entry in @foos %>
    <li id='folder_entry_<%=folder_entry.id%>'><span class="handle"><%= folder_entry.content.name %></span></li>
  <% end %>

  <li><span class="handle">[drag]</span>1</li>
  <li><span class="handle">[drag]</span>2</li>
</ul>

<%= render(:partial => "folder_entry", :object => @root) %>

<ul>
  <%= render(:partial => "folder_entry", :collection => @root.children) %>
</ul>


<script type="text/javascript">
  $(document).ready(function(){
  $('#folder_entries').sortable({
    axis: 'y',
    dropOnEmpty: false,
    handle: '.handle',
    cursor: 'crosshair',
    items: 'li',
    opacity: 0.4,
    scroll: true,
    update: function(){
      $.ajax({
        type: 'post',
        data: $('#folder_entries').sortable('serialize') + '&id=<%=folder_entry.id-%>',
        dataType: 'script',
        complete: function(request){
          $('#folder_entries').effect('highlight');
          },
        url: '/admin/inkling/folder_entries/sort'})
      }
    });
  });


  function toggle_content_form(id){
      content_form = document.getElementById("content-form-" + id)
//    content_form = $("#content-form-" + id)

      if (content_form.style.display == "none")
        content_form.style.display = "block"
      else
        content_form.style.display = "none"
  }
</script>
